apiVersion: v1
kind: ConfigMap
metadata:
  name: ai-log-analyzer-config
  namespace: ai-log-analyzer
data:
  # Application settings
  APP_NAME: "ai-log-analyzer"
  APP_ENV: "nprod"
  LOG_LEVEL: "INFO"

  # API settings
  API_HOST: "0.0.0.0"
  API_PORT: "8000"

  # Database configuration
  # Actual credentials come from Secret/Cyberark
  DATABASE_NAME: "ailog_analyzer"
  DATABASE_PORT: "5432"

  # Elasticsearch indices
  # Supports multiple index patterns for different K8s clusters
  ES_INDEX_PATTERN: "cluster-app_pcb-*,cluster-app_pca-*,cluster-app_pcb_ch-*"

  # Elasticsearch timeout (seconds)
  ES_TIMEOUT: "30"

  # EWMA settings for anomaly detection
  EWMA_ALPHA: "0.3"
  EWMA_THRESHOLD: "2.0"

  # Ollama/LLM settings
  # If unavailable, app falls back to MockLLMService automatically
  OLLAMA_URL: "http://localhost:11434"
  OLLAMA_MODEL: "mistral:latest"
  # Note: USE_MOCK_LLM not used by current app version
  # App handles Ollama unavailability gracefully with try/except

  # Performance tuning
  API_WORKERS: "4"
  UVICORN_LOG_LEVEL: "info"
